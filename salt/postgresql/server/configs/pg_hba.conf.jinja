{% set psf_internal = salt["pillar.get"]("psf_internal_network") %}
{% set pypi_internal = salt["pillar.get"]("pypi_internal_network") %}
# PostgreSQL Client Authentication Configuration File
# ===================================================
#

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# Database administrative login by Unix domain socket
local   all             postgres                                peer

# Monitoring
host    all             diamond         127.0.0.1/32            md5

# Replication
host replication       replicator       {{ psf_internal }}      md5

# Application Databases
host monitoring        monitoring       0.0.0.0/0               md5
host bugs-python       bugs-python      0.0.0.0/0               md5
host pydotorg-prod     pydotorg-prod    0.0.0.0/0               md5
host pydotorg-staging  pydotorg-staging 0.0.0.0/0               md5
host pydotorg-staging2 pydotorg-staging 0.0.0.0/0               md5
host pycon-prod        pycon-prod       0.0.0.0/0               md5
host pycon-staging     pycon-staging    0.0.0.0/0               md5
host speed-web         speed-web        0.0.0.0/0               md5
host testpypi          testpypi         0.0.0.0/0               md5
host discourse         discourse        0.0.0.0/0               md5
